<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <report
            id="japanese_report_invoice_document"
            model="account.move"
            report_type="qweb-pdf"
            string="個別請求書"
            name="monthly_invoice.japanese_report_invoice_document"
            file="monthly_invoice.japanese_report_invoice_document"
            paperformat="monthly_invoice.paperformat_japan_lowmargin"
    />

    <template id="japanese_report_invoice_document">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.internal_layout" style="margin-top: 1px; padding-top: 0px;">
                    <div class="container" style="margin-top: 1px; padding-top: 0px;">
                        <div class="row" style="margin-top: 1px; padding-top: 0px;">
                            <div class="col-7">

                                <p>
                                    <p style="font-size:15px; font-weight: 10;  padding-left:15px; margin-left:15px">

                                    <span style="font-size:14px;" t-esc="doc.partner_id.zip"/><br/>
                                    <span style="font-size:14px;" t-esc="doc.partner_id.state_id.name"/>
                                    <span style="font-size:14px;" t-esc="doc.partner_id.city"/>
                                    <span style="font-size:14px;" t-esc="doc.partner_id.street"/>
                                    <span style="font-size:14px;" t-esc="doc.partner_id.street2"/>
                                    <br/>
                                    <span style="font-size:16px; font-weight: bold;"><t t-esc="str(doc.partner_id.name) + '　　御中' if doc.partner_id.is_company else str(doc.partner_id.name) +' 様'"/>
                                    </span>


                                </p>
<!--                                    <div t-if="doc.partner_id.vat" class="mt16">-->
<!--                                        <t t-if="doc.company_id.country_id.vat_label"-->
<!--                                           t-esc="doc.company_id.country_id.vat_label"-->
<!--                                           id="inv_tax_id_label"/>-->
<!--                                        <t t-else="">Tax ID</t>:-->
<!--                                        <span t-field="doc.partner_id.vat"/>-->
<!--                                    </div>-->
                                    <p style="font-size:12px;">
                                        <br/>
                                        <br/>
                                        <br/>
                                        <br/>
                                        件名: <span t-esc="doc._get_subject(doc.monthly_invoices)"/>
                                        <br/>
                                        <br/>
                                        下記の通りご請求致しますのでお支払い下さいますようお願い申し上げます。
                                    </p>
                                    <h4 style="background-color:black; color: white; text-align:center">御 請 求 書</h4>

                                    <br/>


                                </p>

                                <p style="">
                                    <br/>
                                    <br/>
                                    <br/>
                                    <br/>
                                </p>
                            </div>
                            <div class="col-5">
                                <table class="float-right" style="width: 80%; font-size: 13px;">

                                    <tr>
                                        <td class="text-right">請求日:
                                            <span t-esc="doc.invoice_date.year"/>/
                                            <span t-esc="doc.invoice_date.month"/>/
                                            <span t-esc="doc.invoice_date.day"/>
                                        </td>

                                    </tr>
                                    <tr>
                                        <td class="text-right">ご請求No: FPS49 -
                                            <span t-esc="str(doc.name)[6:]"/>
                                        </td>
                                    </tr>
                                </table>

                                <br/>
                                <br/>
                                <p class="float-right">
                                    <span class="bold-name" style="font-size:15px; font-weight: bold !important;"><t t-esc="doc.company_id.name"/></span>
                                    <br/>
                                    <span style="font-size:11px;" t-esc="doc.company_id.zip"/>
                                    <br/>
                                    <span style="font-size:11px;" t-esc="doc.company_id.state_id.name"/>
                                    <span style="font-size:11px;" t-esc="doc.company_id.city"/>
                                    <span style="font-size:11px;" t-esc="doc.company_id.street"/>
                                    <span style="font-size:11px;" t-esc="doc.company_id.street2"/>

                                </p>
                                <style>
                                    .inkan {
                                    width:80%;
                                    padding-top: 10px;

                                    }
                                    .inkantd {
                                    width:30%;
                                    position:relative;
                                    border: solid 1px;

                                    }
                                    .inkantd:after{
                                    content:'';
                                    display:block;
                                    margin-top:100%;
                                    }
                                    .inkantd .content {
                                    position:absolute;
                                    top:0;
                                    bottom:0;
                                    left:0;
                                    right:0;
                                    }
                                </style>

                                <p>

                                        <div style="font-weight: 10; font-size:10px; float: left">
                                            ※ 誠に恐れ入りますが上記代金を下記口座にお振込願います。
                                            <br/>
                                            三井住友銀行 世田谷支店 当座 No.0267088
                                            <br/>
                                            三菱UFJ銀行 渋谷中央支店 当座 No.0663058
                                            <br/>
                                            みずほ銀行 世田谷支店 当座 No.0110241
                                            <br/>
                                            三菱UFJ銀行 駒沢大学駅前支店 当座 No.0144789
                                            <br/>
                                            りそな銀行 渋谷支店 当座 No.0513734

                                        </div>
<!--                                        <div style="font-weight: 10; font-size:10px; float: right">お支払い期限-->
<!--                                            <span t-field="doc.invoice_date_due"/>-->
<!--                                        </div>-->

                                    </p>
                                <br/>

                                <table class="inkan">
                                    <tr>
                                        <td class="inkantd">
                                            <div class="content"></div>
                                        </td>
                                        <td class="inkantd">
                                            <div class="content"></div>
                                        </td>
                                        <td class="inkantd">
                                            <div class="content"></div>
                                        </td>
                                    </tr>

                                </table>

                            </div>
                        </div>
                    </div>
                    <br/>
                     <table class="table table-sm o_main_table" name="invoice_line_table">
                        <thead>
                            <tr>
                                <!-- TODO: remove in master -->
                                <t t-set="colspan" t-value="5"/>
                                <th name="th_description" class="text-left"><span>商品名</span></th>
                                <th name="th_commitment" class="text-left"><span>出荷日</span></th>
                                <!-- TODO: remove in master -->
                                <th name="th_source" class="d-none text-left" t-if="0"><span>Source Document</span></th>
                                <th name="th_quantity" class="text-right"><span>数量</span></th>
                                <th name="th_priceunit" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>単価</span></th>
                                <th name="th_total" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>金額</span></th>
                            </tr>
                        </thead>
                        <tbody class="invoice_tbody">
                            <t t-set="current_subtotal" t-value="0"/>
                            <t t-set="lines" t-value="doc.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>

                            <t t-foreach="lines" t-as="line">
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                                <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                    <t t-if="not line.display_type" name="account_invoice_line_accountable">
                                        <td name="account_invoice_line_name"><span t-field="line.product_id.name" t-options="{'widget': 'text'}"/></td>
                                        <td name="commitment"><span t-esc="doc._get_commitment(doc.invoice_origin)" t-options="{'widget': 'date'}"/></td>
                                        <td class="text-right">
                                            <span t-field="line.quantity"/>
                                            <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                        </td>
                                        <td t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                            <span class="text-nowrap" t-field="line.price_unit"/>
                                        </td>
<!--                                        <td t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">-->
<!--                                            <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))" id="line_tax_ids"/>-->
<!--                                        </td>-->
                                        <td class="text-right o_price_total">
                                            <span class="text-nowrap" t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                            <span class="text-nowrap" t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                        </td>
                                    </t>
                                    <t t-if="line.display_type == 'line_section'">
                                        <td colspan="99">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                        </td>
                                        <t t-set="current_section" t-value="line"/>
                                        <t t-set="current_subtotal" t-value="0"/>
                                    </t>
                                    <t t-if="line.display_type == 'line_note'">
                                        <td colspan="99">
                                            <span t-field="line.name" t-options="{'widget': 'text'}"/>
                                        </td>
                                    </t>
                                </tr>

                                <t t-if="current_section and (line_last or lines[line_index+1].display_type == 'line_section')">
                                    <tr class="is-subtotal text-right">
                                        <td colspan="99">
                                            <strong class="mr16">小計</strong>
                                            <span t-esc="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.currency_id}"/>
                                        </td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>

                    <div class="clearfix">
                        <div id="total" class="row">
                            <div t-attf-class="#{'col-6' if report_type != 'html' else 'col-sm-7 col-md-6'} ml-auto">
                                <table class="table table-sm" style="page-break-inside: avoid;">
                                    <tr class="border-black o_subtotal" style="">
                                        <td><strong>小計</strong></td>
                                        <td class="text-right">
                                            <span t-field="doc.amount_untaxed"/>
                                        </td>
                                    </tr>
                                    <t t-foreach="doc.amount_by_group" t-as="amount_by_group">
                                        <tr style="">
                                            <t t-if="len(doc.line_ids.filtered(lambda line: line.tax_line_id)) == 1 and doc.amount_untaxed == amount_by_group[2]">
                                                <td><span class="text-nowrap" t-esc="amount_by_group[0]"/></td>
                                                <td class="text-right o_price_total">
                                                    <span class="text-nowrap" t-esc="amount_by_group[3]"/>
                                                </td>
                                            </t>
                                            <t t-else="">
                                                <td>
                                                    <span t-esc="amount_by_group[0]"/>
                                                    <span class="text-nowrap"> on
                                                        <t t-esc="amount_by_group[4]"/>
                                                    </span>
                                                </td>
                                                <td class="text-right o_price_total">
                                                    <span class="text-nowrap" t-esc="amount_by_group[3]"/>
                                                </td>
                                            </t>
                                        </tr>
                                    </t>
                                    <tr class="border-black o_total">
                                        <td><strong>ご請求合計金額</strong></td>
                                        <td class="text-right">
                                            <span class="text-nowrap" t-field="doc.amount_total"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>


<!--                    <t t-if="counter >= 17">-->
<!--                        <div style="page-break-before: always;">-->
<!--                            <div class="row">-->
<!--                                <div class="col-6">-->
<!--                                                                        <p>-->
<!--                                        <div style="font-weight: 10; font-size:10px;">備考-->
<!--                                            <span t-field="doc.ref"/>-->
<!--                                            <hr/>-->
<!--                                            <br/>-->
<!--                                        </div>-->

<!--                                        <div style="font-weight: 10; font-size:10px; float: left">-->
<!--                                            ※ 誠に恐れ入りますが上記代金を下記口座にお振込願います。-->
<!--                                            <br/>-->
<!--                                            三井住友銀行 世田谷支店 当座 No.0267088-->
<!--                                            <br/>-->
<!--                                            三菱UFJ銀行 渋谷中央支店 当座 No.0663058-->
<!--                                            <br/>-->
<!--                                            みずほ銀行 世田谷支店 当座 No.0110241-->
<!--                                            <br/>-->
<!--                                            三菱UFJ銀行 駒沢大学駅前支店 当座 No.0144789-->
<!--                                            <br/>-->
<!--                                            りそな銀行 渋谷支店 当座 No.0513734-->
<!--                                        </div>-->
<!--&lt;!&ndash;                                        <div style="font-weight: 10; font-size:10px; float: right">お支払い期限&ndash;&gt;-->
<!--&lt;!&ndash;                                            <span t-field="doc.invoice_date_due"/>&ndash;&gt;-->
<!--&lt;!&ndash;                                        </div>&ndash;&gt;-->

<!--                                    </p>-->

<!--                                </div>-->
<!--                                <div class="col-6">-->
<!--                                                                        <table class="table table-sm table-bordered float-right"-->
<!--                                           style="width: 100%; font-size: 13px">-->
<!--                                        <tr>-->
<!--                                            <td class="text-center">小 計-->
<!--                                            </td>-->
<!--                                            <td class="text-center">¥-->
<!--                                                <span t-esc="'{0:,}'.format(round(doc.monthly_sum_without_tax))"/>-->
<!--                                            </td>-->
<!--                                        </tr>-->
<!--                                        <tr>-->
<!--                                            <td class="text-center">消費税-->
<!--                                            </td>-->
<!--                                            <td class="text-center">¥-->
<!--                                                <span t-esc="'{0:,}'.format(round(doc.monthly_tax))"/>-->
<!--                                            </td>-->
<!--                                        </tr>-->

<!--                                        <tr>-->
<!--                                            <td class="text-center">合 計-->
<!--                                            </td>-->
<!--                                            <td class="text-center">¥-->
<!--                                                <span t-esc="'{0:,}'.format(round(doc.monthly_sum_with_tax))"/>-->
<!--                                            </td>-->
<!--                                        </tr>-->
<!--                                    </table>-->

<!--                                </div>-->
<!--                            </div>-->

<!--                            <br/>-->
<!--                            <br/>-->


<!--                        </div>-->
<!--                    </t>-->
<!--                        <div t-if="counter &lt; 17">-->

<!--                            <div class="row">-->
<!--                                <div class="col-6">-->
<!--                                                                        <p>-->
<!--                                        <div style="font-weight: 10; font-size:10px;">備考-->
<!--                                            <span t-field="doc.ref"/>-->
<!--                                            <hr/>-->
<!--                                            <br/>-->
<!--                                        </div>-->

<!--                                        <div style="font-weight: 10; font-size:10px; float: left">-->
<!--                                            ※ 誠に恐れ入りますが上記代金を下記口座にお振込願います。-->
<!--                                            <br/>-->
<!--                                            三井住友銀行 世田谷支店 当座 No.0267088-->
<!--                                            <br/>-->
<!--                                            三菱UFJ銀行 渋谷中央支店 当座 No.0663058-->
<!--                                            <br/>-->
<!--                                            みずほ銀行 世田谷支店 当座 No.0110241-->
<!--                                            <br/>-->
<!--                                            三菱UFJ銀行 駒沢大学駅前支店 当座 No.0144789-->
<!--                                            <br/>-->
<!--                                            りそな銀行 渋谷支店 当座 No.0513734-->
<!--                                        </div>-->
<!--&lt;!&ndash;                                        <div style="font-weight: 10; font-size:10px; float: right">お支払い期限&ndash;&gt;-->
<!--&lt;!&ndash;                                            <span t-field="doc.invoice_date_due"/>&ndash;&gt;-->
<!--&lt;!&ndash;                                        </div>&ndash;&gt;-->

<!--                                    </p>-->

<!--                                </div>-->
<!--                                <div class="col-6">-->
<!--                                                                        <table class="table table-sm table-bordered float-right"-->
<!--                                           style="width: 100%; font-size: 13px">-->
<!--                                        <tr>-->
<!--                                            <td class="text-center">小 計-->
<!--                                            </td>-->
<!--                                            <td class="text-center">¥-->
<!--                                                <span t-esc="'{0:,}'.format(round(doc.monthly_sum_without_tax))"/>-->
<!--                                            </td>-->
<!--                                        </tr>-->
<!--                                        <tr>-->
<!--                                            <td class="text-center">消費税-->
<!--                                            </td>-->
<!--                                            <td class="text-center">¥-->
<!--                                                <span t-esc="'{0:,}'.format(round(doc.monthly_tax))"/>-->
<!--                                            </td>-->
<!--                                        </tr>-->

<!--                                        <tr>-->
<!--                                            <td class="text-center">合 計-->
<!--                                            </td>-->
<!--                                            <td class="text-center">¥-->
<!--                                                <span t-esc="'{0:,}'.format(round(doc.monthly_sum_with_tax))"/>-->
<!--                                            </td>-->
<!--                                        </tr>-->
<!--                                    </table>-->

<!--                                </div>-->
<!--                            </div>-->

<!--                        </div>-->



                <div class="footer">
                  <div class="row">
                      <div class="col-6"></div>
                      <div class="col-6" style="padding:0px;">
                          <p><span class="page" /> / <span class="topage" /></p>
                      </div>


                  </div>
                </div>

                </t>
            </t>
        </t>
    </template>


</odoo>